imports:
  UTCTime: Kernel.Prelude
  ShortId: Kernel.Types.Id
  HighPrecMoney: Kernel.Types.Common
  PayoutOrderStatus : Kernel.External.Payout.Juspay.Types.Payout
  AccountDetailsType : Kernel.External.Payout.Juspay.Types.Payout
  EntityName : Lib.Payment.Domain.Types.Common

PayoutOrders:
  tableName: payout_orders
  fields:
    id : Id PayoutOrders
    customerId : Text
    orderId : Text
    merchantId : Text
    city : Text
    amount : HighPrecMoney
    status : PayoutOrderStatus
    accountDetailsType : Maybe AccountDetailsType
    entityId : Maybe Text
    entityName : Maybe EntityName
    vpa : Maybe Text
    mobileNo : Text
    customerEmail : Text
    lastStatusCheckedAt : Maybe UTCTime
    createdAt : UTCTime
    updatedAt : UTCTime
  sqlType:
    id: character varying(36)
    amount: double precision
    createdAt: timestamp with time zone
    updatedAt: timestamp with time zone
  constraints:
    id: PrimaryKey
    orderId: PrimaryKey
  queries:
    findById:
      kvFunction: findOneWithKV
      where: id
    findByOrderId:
      kvFunction: findOneWithKV
      where: orderId
    findAllByEntityNameAndEntityIds:
      kvFunction: findAllWithOptionsKV
      where:
        and:
          - eq: [entityName]
          - in: [entityId]
    updatePayoutOrderStatus:
      kvFunction: updateOneWithKV
      params: [status]
      where: orderId
  defaultQueryTypeConstraint: "(Lib.Payment.Storage.Beam.BeamFlow.BeamFlow m r)"
  beamInstance: MakeTableInstancesGenericSchema

PayoutTransactions:
  tableName: payout_transactions
  fields:
    id : Id PayoutTransactions
    payoutOrderId : Id PayoutOrders
    transactionRef : Text
    gateWayRefId : Maybe Text
    fulfillmentMethod : Maybe Text
    amount : HighPrecMoney
    status : Text
    merchantId: Text
    createdAt : UTCTime
    updatedAt : UTCTime
  sqlType:
    id: character varying(36)
    amount: double precision
    createdAt: timestamp with time zone
    updatedAt: timestamp with time zone
  constraints:
    id: PrimaryKey
    transactionRef: PrimaryKey
  queries:
    findById:
      kvFunction: findOneWithKV
      where: id
    findByTransactionRef:
      kvFunction: findOneWithKV
      where: transactionRef
    updatePayoutTransactionStatus:
      kvFunction: updateWithKV
      params: [status]
      where: transactionRef
  defaultQueryTypeConstraint: "(Lib.Payment.Storage.Beam.BeamFlow.BeamFlow m r)"
  beamInstance: MakeTableInstancesGenericSchema
